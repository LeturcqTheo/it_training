{% extends 'base.html.twig' %}

{% block title %}Ajouter Evenement{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="row">
        {% include "sidebar/sidebar.html.twig" %}

        <main class="col-md-10 ms-sm-auto px-4 py-4">
            <h2 class="fw-bold">Agenda partagé</h2>
            <ul class="nav nav-tabs my-3"></ul>
            <a href="{{ path('app_home') }}" class="btn btn-secondary mb-3">Retour</a>

            <div class="row my-4">
                <div class="col-md-6">
                    <div id="calendar-holder"></div>
                </div>

                <div class="col-md-6">
                    <form id="create_event" class="p-3 border rounded shadow-sm bg-light">
                        <h5 class="mb-4">Créer un événement</h5>
                        <div class="row">
                            <div class="mb-3 col-md-6">
                                <label for="centre-selector" class="form-label">Centre:</label>
                                <select id="centre-selector" class="form-select">
                                    <option value="">-</option>
                                    {% for centre in centres %}
                                        <option value="{{ centre.id }}">{{ centre.nom }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="mb-3 col-md-6">
                                <label for="salle-selector" class="form-label">Salle:</label>
                                <select id="salle-selector" class="form-select" disabled>
                                    <option value="">-</option>
                                    {% for salle in salles %}
                                        <option value="{{ salle.id }}" data-centre="{{ salle.centreformation.id }}">{{ salle.nom }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="nom_event" class="form-label">Nom de l'evenement:</label>
                            <input id="nom_event" name="nom_event" type="text" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="nom_resp" class="form-label">Nom du resposable:</label>
                            <input id="nom_resp" name="nom_resp" type="text" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="nbr_part" class="form-label">Nbr de participants:</label>
                            <input id="nbr_part" name="nbr_part" type="number" min="1" class="form-control">
                        </div>
                        <div class="row">
                            <div class="mb-3 col-md-6">
                                <label for="date_debut" class="form-label">Date de début:</label>
                                <input id="date_debut" name="date_debut" type="datetime-local" class="form-control">
                            </div>
                            <div class="mb-3 col-md-6">
                                <label for="date_fin" class="form-label">Date de fin:</label>
                                <input id="date_fin" name="date_fin" type="datetime-local" class="form-control">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Créer l'événement</button>
                    </form>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <script src="{{ asset('js/calendar_event.js') }}"></script>
    <script src="{{ asset('js/salle_selector.js') }}"></script>
{% endblock %}
